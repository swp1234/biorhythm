<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta name="theme-color" content="#0a0a1a">
<title>ë°”ì´ì˜¤ë¦¬ë“¬ ê³„ì‚°ê¸° - Biorhythm Calculator | DopaBrain</title>
<meta name="description" content="ìƒë…„ì›”ì¼ë¡œ ì˜¤ëŠ˜ì˜ ë°”ì´ì˜¤ë¦¬ë“¬ì„ í™•ì¸í•˜ì„¸ìš”. ì‹ ì²´, ê°ì„±, ì§€ì„± 3ê°€ì§€ ì£¼ê¸°ë¥¼ ì•„ë¦„ë‹¤ìš´ ê·¸ë˜í”„ë¡œ ì‹œê°í™”í•©ë‹ˆë‹¤. ë¬´ë£Œ ë°”ì´ì˜¤ë¦¬ë“¬ ê³„ì‚°ê¸°!">
<meta name="keywords" content="ë°”ì´ì˜¤ë¦¬ë“¬, biorhythm, ìš´ì„¸, ê±´ê°•ë¦¬ë“¬, ì‹ ì²´ë¦¬ë“¬, ê°ì„±ë¦¬ë“¬, ì§€ì„±ë¦¬ë“¬, ë°”ì´ì˜¤ë¦¬ë“¬ ê³„ì‚°ê¸°">
<link rel="canonical" href="https://dopabrain.com/biorhythm/">

<meta property="og:title" content="ë°”ì´ì˜¤ë¦¬ë“¬ ê³„ì‚°ê¸° - ì˜¤ëŠ˜ì˜ ë¦¬ë“¬ì„ í™•ì¸í•˜ì„¸ìš”">
<meta property="og:description" content="ìƒë…„ì›”ì¼ í•˜ë‚˜ë¡œ ì‹ ì²´Â·ê°ì„±Â·ì§€ì„± ë°”ì´ì˜¤ë¦¬ë“¬ì„ ì•„ë¦„ë‹¤ìš´ ê·¸ë˜í”„ë¡œ í™•ì¸í•˜ì„¸ìš”.">
<meta property="og:type" content="website">
<meta property="og:url" content="https://dopabrain.com/biorhythm/">
<meta property="og:image" content="https://dopabrain.com/biorhythm/icon-512.svg">
<meta name="twitter:card" content="summary_large_image">

<link rel="alternate" hreflang="ko" href="https://dopabrain.com/biorhythm/">
<link rel="alternate" hreflang="en" href="https://dopabrain.com/biorhythm/">
<link rel="alternate" hreflang="ja" href="https://dopabrain.com/biorhythm/">
<link rel="alternate" hreflang="zh" href="https://dopabrain.com/biorhythm/">
<link rel="alternate" hreflang="x-default" href="https://dopabrain.com/biorhythm/">

<script type="application/ld+json">
{
  "@context":"https://schema.org","@type":"WebApplication","name":"Biorhythm Calculator","applicationCategory":"HealthApplication",
  "description":"Calculate your biorhythm cycles based on your birthdate. Visualize physical, emotional, and intellectual rhythms.",
  "url":"https://dopabrain.com/biorhythm/","operatingSystem":"All","offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},
  "author":{"@type":"Organization","name":"DopaBrain","url":"https://dopabrain.com/"}
}
</script>

<meta name="google-adsense-account" content="ca-pub-3600813755953882">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3600813755953882" crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-J8GSWM40TV"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date());gtag('config','G-J8GSWM40TV');</script>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=DM+Serif+Display:ital@0;1&display=swap" rel="stylesheet">

<style>
*,*::before,*::after{margin:0;padding:0;box-sizing:border-box}
:root{
  --bg:#0a0a1a;--bg2:#0f0f2a;--bg3:#161638;
  --surface:rgba(22,22,56,0.6);--surface-border:rgba(108,92,231,0.15);
  --text:#e8e6f0;--text2:#9896b0;--text3:#5c5a72;
  --physical:#e74c3c;--emotional:#3498db;--intellectual:#f39c12;
  --accent:#6c5ce7;--accent2:#a29bfe;
  --glow-physical:rgba(231,76,60,0.4);--glow-emotional:rgba(52,152,219,0.4);--glow-intellectual:rgba(243,156,18,0.4);
}
[data-theme="light"]{
  --bg:#f5f5fa;--bg2:#ffffff;--bg3:#f0f0f5;
  --surface:rgba(255,255,255,0.9);--surface-border:rgba(108,92,231,0.15);
  --text:#1a1a2e;--text2:#5a5a70;--text3:#8a8a9a;
}
[data-theme="light"] body{background:var(--bg);color:var(--text)}
html{font-size:16px;scroll-behavior:smooth}
body{
  font-family:'Outfit',sans-serif;background:var(--bg);color:var(--text);
  min-height:100vh;overflow-x:hidden;line-height:1.5;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}

/* Stars Background */
.stars-container{position:fixed;inset:0;pointer-events:none;z-index:0;overflow:hidden}
.star{position:absolute;width:2px;height:2px;background:#fff;border-radius:50%}
.star.bright{width:3px;height:3px;box-shadow:0 0 6px 1px rgba(168,160,255,0.5)}

/* Loader */
.app-loader{
  position:fixed;inset:0;background:var(--bg);z-index:10000;
  display:flex;align-items:center;justify-content:center;flex-direction:column;gap:20px;
  transition:opacity .4s,visibility .4s;
}
.app-loader.hidden{opacity:0;visibility:hidden;pointer-events:none}
.loader-ring{width:48px;height:48px;border:3px solid var(--bg3);border-top-color:var(--accent);border-radius:50%;animation:spin .8s linear infinite}
.loader-text{font-size:13px;color:var(--text2);letter-spacing:2px;text-transform:uppercase}
@keyframes spin{to{transform:rotate(360deg)}}

/* Layout */
.app-shell{position:relative;z-index:1;max-width:720px;margin:0 auto;padding:16px 16px 40px}

/* Top Bar */
.top-bar{display:flex;justify-content:space-between;align-items:center;padding:8px 0 20px}
.home-link{
  display:inline-flex;align-items:center;gap:6px;
  color:var(--text2);text-decoration:none;font-size:12px;letter-spacing:.5px;
  transition:color .2s;
}
.home-link:hover{color:var(--accent2)}
.home-link svg{width:14px;height:14px}
.lang-toggle{
  width:38px;height:38px;border-radius:50%;border:1px solid var(--surface-border);
  background:var(--surface);color:var(--text);font-size:16px;cursor:pointer;
  backdrop-filter:blur(10px);transition:all .2s;display:flex;align-items:center;justify-content:center;
}
.lang-toggle:hover{border-color:var(--accent);background:rgba(108,92,231,0.15)}
.lang-menu{
  position:absolute;top:52px;right:16px;background:var(--bg2);border:1px solid var(--surface-border);
  border-radius:12px;padding:6px;z-index:200;min-width:130px;
  box-shadow:0 12px 40px rgba(0,0,0,.5);backdrop-filter:blur(20px);
  display:none;
}
.lang-menu.open{display:block}
.lang-option{
  display:block;width:100%;padding:8px 12px;text-align:left;border:none;
  background:transparent;color:var(--text2);font-size:13px;cursor:pointer;
  border-radius:8px;transition:all .15s;font-family:inherit;
}
.lang-option:hover{background:rgba(108,92,231,0.15);color:var(--text)}
.lang-option.active{color:var(--accent2);background:rgba(108,92,231,0.1)}

/* Hero */
.hero{text-align:center;padding:20px 0 32px}
.hero-icon{font-size:48px;margin-bottom:12px;display:block;filter:drop-shadow(0 0 20px rgba(108,92,231,0.4))}
.hero h1{
  font-family:'DM Serif Display',serif;font-size:clamp(28px,6vw,40px);font-weight:400;
  background:linear-gradient(135deg,var(--accent2),var(--text),var(--accent2));
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  line-height:1.2;margin-bottom:8px;
}
.hero p{color:var(--text2);font-size:14px;max-width:400px;margin:0 auto;font-weight:300}

/* Input Section */
.input-section{
  background:var(--surface);border:1px solid var(--surface-border);
  border-radius:20px;padding:24px;margin-bottom:24px;
  backdrop-filter:blur(12px);
}
.input-row{display:flex;gap:12px;align-items:end;flex-wrap:wrap}
.input-group{flex:1;min-width:180px}
.input-label{display:block;font-size:11px;color:var(--text2);text-transform:uppercase;letter-spacing:1.5px;margin-bottom:8px;font-weight:500}
.date-input{
  width:100%;padding:14px 16px;border-radius:12px;
  border:1px solid var(--surface-border);background:rgba(10,10,26,0.6);
  color:var(--text);font-size:16px;font-family:inherit;
  transition:border-color .2s,box-shadow .2s;outline:none;
}
.date-input:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(108,92,231,0.15)}
.date-input::-webkit-calendar-picker-indicator{filter:invert(1) brightness(0.7)}
.btn-calculate{
  padding:14px 28px;border:none;border-radius:12px;
  background:linear-gradient(135deg,var(--accent),#8b7cf7);
  color:#fff;font-size:14px;font-weight:600;font-family:inherit;
  cursor:pointer;transition:all .2s;letter-spacing:.5px;white-space:nowrap;
}
.btn-calculate:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(108,92,231,0.35)}
.btn-calculate:active{transform:translateY(0)}

/* Compatibility toggle */
.compat-toggle{
  display:flex;align-items:center;gap:10px;margin-top:16px;
  padding-top:16px;border-top:1px solid rgba(108,92,231,0.08);
}
.compat-toggle label{font-size:13px;color:var(--text2);cursor:pointer;user-select:none}
.toggle-switch{
  position:relative;width:40px;height:22px;border-radius:11px;
  background:var(--bg3);cursor:pointer;transition:background .2s;flex-shrink:0;
}
.toggle-switch.on{background:var(--accent)}
.toggle-switch::after{
  content:'';position:absolute;top:3px;left:3px;width:16px;height:16px;
  border-radius:50%;background:#fff;transition:transform .2s;
}
.toggle-switch.on::after{transform:translateX(18px)}
.compat-input{margin-top:12px;display:none}
.compat-input.show{display:block}

/* Graph Section */
.graph-section{
  background:var(--surface);border:1px solid var(--surface-border);
  border-radius:20px;padding:20px;margin-bottom:24px;
  backdrop-filter:blur(12px);display:none;
}
.graph-section.visible{display:block;animation:fadeUp .5s ease}
@keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}
.graph-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;flex-wrap:wrap;gap:8px}
.graph-title{font-family:'DM Serif Display',serif;font-size:20px;font-weight:400}
.graph-legend{display:flex;gap:14px;flex-wrap:wrap}
.legend-item{display:flex;align-items:center;gap:5px;font-size:11px;color:var(--text2);text-transform:uppercase;letter-spacing:.5px}
.legend-dot{width:8px;height:8px;border-radius:50%}
.canvas-wrap{position:relative;width:100%;aspect-ratio:2/1;min-height:200px}
.canvas-wrap canvas{width:100%;height:100%;border-radius:12px;cursor:crosshair}
.graph-tooltip{
  position:absolute;pointer-events:none;padding:10px 14px;
  background:rgba(10,10,26,0.92);border:1px solid var(--surface-border);
  border-radius:10px;font-size:12px;color:var(--text);
  backdrop-filter:blur(10px);box-shadow:0 8px 24px rgba(0,0,0,.4);
  opacity:0;transition:opacity .15s;z-index:10;white-space:nowrap;
  transform:translate(-50%,-110%);
}
.graph-tooltip.show{opacity:1}
.tooltip-date{font-weight:600;margin-bottom:4px;color:var(--text2);font-size:11px;letter-spacing:.5px}
.tooltip-row{display:flex;align-items:center;gap:6px;margin-top:3px}
.tooltip-color{width:6px;height:6px;border-radius:50%;flex-shrink:0}

/* Reading Cards */
.reading-section{display:none;margin-bottom:24px}
.reading-section.visible{display:block;animation:fadeUp .5s ease .1s both}
.reading-date{
  font-family:'DM Serif Display',serif;font-size:18px;text-align:center;margin-bottom:16px;color:var(--text2);
}
.reading-date strong{color:var(--text)}
.reading-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
@media(max-width:520px){.reading-grid{grid-template-columns:1fr}}
.reading-card{
  background:var(--surface);border:1px solid var(--surface-border);
  border-radius:16px;padding:20px;text-align:center;
  backdrop-filter:blur(12px);transition:transform .2s,box-shadow .2s;position:relative;overflow:hidden;
}
.reading-card::before{
  content:'';position:absolute;top:0;left:0;right:0;height:3px;
  border-radius:16px 16px 0 0;
}
.reading-card.physical::before{background:var(--physical)}
.reading-card.emotional::before{background:var(--emotional)}
.reading-card.intellectual::before{background:var(--intellectual)}
.reading-card:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.2)}
.card-icon{font-size:28px;margin-bottom:8px;display:block}
.card-label{font-size:11px;text-transform:uppercase;letter-spacing:1.5px;color:var(--text2);margin-bottom:12px;font-weight:500}
.card-value{font-family:'DM Serif Display',serif;font-size:36px;line-height:1;margin-bottom:4px}
.card-value.positive{color:var(--accent2)}
.card-value.negative{color:var(--text3)}
.card-bar{width:100%;height:4px;background:var(--bg);border-radius:2px;margin:12px 0;overflow:hidden;position:relative}
.card-bar-fill{height:100%;border-radius:2px;transition:width .8s cubic-bezier(.22,1,.36,1)}
.card-bar-center{position:absolute;left:50%;top:-1px;width:1px;height:6px;background:var(--text3)}
.card-desc{font-size:13px;color:var(--text2);line-height:1.5;font-weight:300}
.card-status{
  display:inline-block;padding:4px 10px;border-radius:20px;font-size:11px;
  font-weight:500;margin-top:10px;letter-spacing:.5px;
}
.card-status.high{background:rgba(108,92,231,0.15);color:var(--accent2)}
.card-status.mid{background:rgba(150,150,176,0.1);color:var(--text2)}
.card-status.low{background:rgba(231,76,60,0.1);color:#e08080}
.card-status.critical{background:rgba(243,156,18,0.15);color:var(--intellectual)}

/* Critical Days */
.critical-section{display:none;margin-bottom:24px}
.critical-section.visible{display:block;animation:fadeUp .5s ease .2s both}
.critical-title{font-family:'DM Serif Display',serif;font-size:18px;margin-bottom:12px}
.critical-list{display:flex;flex-direction:column;gap:8px}
.critical-item{
  display:flex;align-items:center;gap:12px;padding:12px 16px;
  background:var(--surface);border:1px solid var(--surface-border);
  border-radius:12px;font-size:13px;
}
.critical-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0}
.critical-date{color:var(--text2);min-width:80px}
.critical-type{color:var(--text)}

/* Share */
.share-section{display:none;text-align:center;margin-bottom:24px}
.share-section.visible{display:block}
.btn-share{
  padding:12px 24px;border:1px solid var(--surface-border);border-radius:12px;
  background:var(--surface);color:var(--text);font-size:13px;font-family:inherit;
  cursor:pointer;transition:all .2s;backdrop-filter:blur(10px);
}
.btn-share:hover{border-color:var(--accent);background:rgba(108,92,231,0.1)}
.share-buttons{display:flex;gap:8px;justify-content:center;margin-top:16px;flex-wrap:wrap}
.share-btn{
  min-height:44px;padding:10px 20px;border:none;border-radius:12px;
  font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s;
  display:inline-flex;align-items:center;gap:6px;font-family:inherit;
}
.share-btn:focus-visible{outline:3px solid var(--accent);outline-offset:2px}
.share-twitter{background:#000;color:#fff}
.share-url{background:rgba(255,255,255,0.1);color:rgba(255,255,255,0.8);border:1px solid rgba(255,255,255,0.15)}
[data-theme="light"] .share-url{background:rgba(0,0,0,0.05);color:#333;border-color:rgba(0,0,0,0.1)}
.share-btn:hover{transform:translateY(-1px)}

/* Ad Banner */
.ad-slot{
  background:var(--surface);border:1px dashed var(--surface-border);
  border-radius:12px;padding:16px;text-align:center;margin-bottom:24px;
  min-height:60px;display:flex;align-items:center;justify-content:center;
}
.ad-slot span{font-size:11px;color:var(--text3);letter-spacing:1px;text-transform:uppercase}

/* Footer */
.app-footer{text-align:center;padding:20px 0;border-top:1px solid var(--surface-border)}
.footer-link{
  display:inline-flex;align-items:center;gap:6px;color:var(--text2);
  text-decoration:none;font-size:12px;transition:color .2s;
}
.footer-link:hover{color:var(--accent2)}
.footer-link svg{width:14px;height:14px}

/* Scroll */
::-webkit-scrollbar{width:6px}
::-webkit-scrollbar-track{background:transparent}
::-webkit-scrollbar-thumb{background:var(--bg3);border-radius:3px}
::selection{background:rgba(108,92,231,0.3);color:#fff}
</style>
</head>
<body>

<div class="app-loader" id="app-loader">
  <div class="loader-ring"></div>
  <div class="loader-text" data-i18n="loader">ë¡œë”© ì¤‘...</div>
</div>

<div class="stars-container" id="stars"></div>

<div class="app-shell">
  <!-- Theme Toggle -->
  <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">â˜€ï¸</button>
  
  <!-- Top Bar -->
  <div class="top-bar">
    <a href="https://dopabrain.com/portal/" class="home-link">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>
      <span>DopaBrain</span>
    </a>
    <button class="lang-toggle" id="langToggle" aria-label="Language">ğŸŒ</button>
    <div class="lang-menu" id="langMenu">
      <button class="lang-option active" data-lang="ko">ğŸ‡°ğŸ‡· í•œêµ­ì–´</button>
      <button class="lang-option" data-lang="en">ğŸ‡ºğŸ‡¸ English</button>
      <button class="lang-option" data-lang="ja">ğŸ‡¯ğŸ‡µ æ—¥æœ¬èª</button>
      <button class="lang-option" data-lang="zh">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</button>
      <button class="lang-option" data-lang="es">ğŸ‡ªğŸ‡¸ EspaÃ±ol</button>
      <button class="lang-option" data-lang="de">ğŸ‡©ğŸ‡ª Deutsch</button>
      <button class="lang-option" data-lang="fr">ğŸ‡«ğŸ‡· FranÃ§ais</button>
      <button class="lang-option" data-lang="pt">ğŸ‡§ğŸ‡· PortuguÃªs</button>
      <button class="lang-option" data-lang="ru">ğŸ‡·ğŸ‡º Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
      <button class="lang-option" data-lang="hi">ğŸ‡®ğŸ‡³ à¤¹à¤¿à¤¨à¥à¤¦à¥€</button>
      <button class="lang-option" data-lang="id">ğŸ‡®ğŸ‡© Indonesia</button>
      <button class="lang-option" data-lang="tr">ğŸ‡¹ğŸ‡· TÃ¼rkÃ§e</button>
    </div>
  </div>

  <!-- Ad Top -->
  <div class="ad-slot"><span data-i18n="ad">ê´‘ê³  ì˜ì—­</span></div>

  <!-- Hero -->
  <div class="hero">
    <span class="hero-icon">ğŸŒ€</span>
    <h1 data-i18n="title">ë°”ì´ì˜¤ë¦¬ë“¬ ê³„ì‚°ê¸°</h1>
    <p data-i18n="subtitle">ìƒë…„ì›”ì¼ë¡œ ì˜¤ëŠ˜ì˜ ì‹ ì²´Â·ê°ì„±Â·ì§€ì„± ë¦¬ë“¬ì„ í™•ì¸í•˜ì„¸ìš”</p>
  </div>

  <!-- Input -->
  <div class="input-section">
    <div class="input-row">
      <div class="input-group">
        <label class="input-label" data-i18n="birthLabel">ìƒë…„ì›”ì¼</label>
        <input type="date" class="date-input" id="birthDate" max="">
      </div>
      <button class="btn-calculate" id="btnCalc" data-i18n="calculate">ë¦¬ë“¬ í™•ì¸</button>
    </div>
    <div class="compat-toggle">
      <div class="toggle-switch" id="compatToggle"></div>
      <label for="compatToggle" data-i18n="compatLabel">ê¶í•© ëª¨ë“œ</label>
    </div>
    <div class="compat-input" id="compatSection">
      <div class="input-group" style="margin-top:4px">
        <label class="input-label" data-i18n="partnerLabel">ìƒëŒ€ ìƒë…„ì›”ì¼</label>
        <input type="date" class="date-input" id="partnerDate" max="">
      </div>
    </div>
  </div>

  <!-- Graph -->
  <div class="graph-section" id="graphSection">
    <div class="graph-header">
      <div class="graph-title" data-i18n="graphTitle">ë°”ì´ì˜¤ë¦¬ë“¬ ê·¸ë˜í”„</div>
      <div class="graph-legend">
        <div class="legend-item"><div class="legend-dot" style="background:var(--physical)"></div><span data-i18n="physical">ì‹ ì²´</span></div>
        <div class="legend-item"><div class="legend-dot" style="background:var(--emotional)"></div><span data-i18n="emotional">ê°ì„±</span></div>
        <div class="legend-item"><div class="legend-dot" style="background:var(--intellectual)"></div><span data-i18n="intellectual">ì§€ì„±</span></div>
      </div>
    </div>
    <div class="canvas-wrap">
      <canvas id="graphCanvas"></canvas>
      <div class="graph-tooltip" id="tooltip"></div>
    </div>
  </div>

  <!-- Reading -->
  <div class="reading-section" id="readingSection">
    <div class="reading-date" id="readingDate"></div>
    <div class="reading-grid" id="readingGrid"></div>
  </div>

  <!-- Critical Days -->
  <div class="critical-section" id="criticalSection">
    <div class="critical-title" data-i18n="criticalTitle">âš¡ ì£¼ì˜ê°€ í•„ìš”í•œ ë‚ </div>
    <div class="critical-list" id="criticalList"></div>
  </div>

  <!-- Share -->
  <div class="share-section" id="shareSection">
    <button class="btn-share" id="btnShare">ğŸ“¤ <span data-i18n="share">ê²°ê³¼ ê³µìœ </span></button>
    <div class="share-buttons" id="share-section" style="display:none">
        <button class="share-btn share-twitter" id="shareTwitterBtn" aria-label="Share on Twitter">
            <span>ğ•</span> Twitter
        </button>
        <button class="share-btn share-url" id="shareUrlBtn" aria-label="Copy URL">
            ğŸ“‹ Copy URL
        </button>
    </div>
  </div>

  <!-- Ad Bottom -->
  <div class="ad-slot"><span data-i18n="ad">ê´‘ê³  ì˜ì—­</span></div>

  <!-- Footer -->
  <footer class="app-footer">
    <a href="https://dopabrain.com/portal/" class="footer-link">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>
      <span>DopaBrain</span>
    </a>
  </footer>
</div>

<script src="/portal/js/cross-promo.js" defer></script>
<script>
if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').catch(() => {});
}
</script>
<script>
(function(){
'use strict';

/* â”€â”€â”€ i18n â”€â”€â”€ */
const LANG = {
  ko:{title:'ë°”ì´ì˜¤ë¦¬ë“¬ ê³„ì‚°ê¸°',subtitle:'ìƒë…„ì›”ì¼ë¡œ ì˜¤ëŠ˜ì˜ ì‹ ì²´Â·ê°ì„±Â·ì§€ì„± ë¦¬ë“¬ì„ í™•ì¸í•˜ì„¸ìš”',birthLabel:'ìƒë…„ì›”ì¼',calculate:'ë¦¬ë“¬ í™•ì¸',compatLabel:'ê¶í•© ëª¨ë“œ',partnerLabel:'ìƒëŒ€ ìƒë…„ì›”ì¼',graphTitle:'ë°”ì´ì˜¤ë¦¬ë“¬ ê·¸ë˜í”„',physical:'ì‹ ì²´',emotional:'ê°ì„±',intellectual:'ì§€ì„±',criticalTitle:'âš¡ ì£¼ì˜ê°€ í•„ìš”í•œ ë‚ ',share:'ê²°ê³¼ ê³µìœ ',loader:'ë¡œë”© ì¤‘...',ad:'ê´‘ê³  ì˜ì—­',today:'ì˜¤ëŠ˜',
    statusHigh:'ìµœê³ ì¡°',statusMid:'ë³´í†µ',statusLow:'ì €ì¡°',statusCritical:'ì „í™˜ê¸°',
    descPhysicalHigh:'ì—ë„ˆì§€ê°€ ë„˜ì¹˜ëŠ” ë‚ ! ìš´ë™ê³¼ ë„ì „ì ì¸ í™œë™ì— ì í•©í•©ë‹ˆë‹¤.',descPhysicalMid:'í‰ë²”í•œ ì»¨ë””ì…˜ì…ë‹ˆë‹¤. ë¬´ë¦¬í•˜ì§€ ë§ˆì„¸ìš”.',descPhysicalLow:'í”¼ë¡œê°€ ìŒ“ì´ê¸° ì‰¬ìš´ ì‹œê¸°ì…ë‹ˆë‹¤. ì¶©ë¶„í•œ íœ´ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤.',descPhysicalCritical:'ì‹ ì²´ ë¦¬ë“¬ì´ ì „í™˜ë˜ëŠ” ë‚ ì…ë‹ˆë‹¤. ë¬´ë¦¬í•œ í™œë™ì„ í”¼í•˜ì„¸ìš”.',
    descEmotionalHigh:'ê°ì„±ì´ í’ë¶€í•œ ë‚ ! ì°½ì‘ í™œë™ê³¼ ì†Œí†µì— ì¢‹ìŠµë‹ˆë‹¤.',descEmotionalMid:'ê°ì •ì´ ì•ˆì •ì ì…ë‹ˆë‹¤. í‰ì†Œì²˜ëŸ¼ ì§€ë‚´ì„¸ìš”.',descEmotionalLow:'ê°ì • ê¸°ë³µì´ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ëª…ìƒì´ë‚˜ ì‚°ì±…ì„ ì¶”ì²œí•©ë‹ˆë‹¤.',descEmotionalCritical:'ê°ì„± ë¦¬ë“¬ì´ ì „í™˜ë©ë‹ˆë‹¤. ì¤‘ìš”í•œ ê²°ì •ì€ ë‚´ì¼ë¡œ ë¯¸ë£¨ì„¸ìš”.',
    descIntellectualHigh:'ë‘ë‡Œ íšŒì „ì´ ë¹ ë¥¸ ë‚ ! í•™ìŠµê³¼ ë¶„ì„ì— ìµœì ì…ë‹ˆë‹¤.',descIntellectualMid:'ë³´í†µ ìˆ˜ì¤€ì˜ ì§‘ì¤‘ë ¥ì…ë‹ˆë‹¤.',descIntellectualLow:'ì§‘ì¤‘ë ¥ì´ ë–¨ì–´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¨ìˆœí•œ ì‘ì—…ì— ì§‘ì¤‘í•˜ì„¸ìš”.',descIntellectualCritical:'ì§€ì„± ë¦¬ë“¬ì´ ì „í™˜ë©ë‹ˆë‹¤. ì¤‘ìš”í•œ ì‹œí—˜ì´ë‚˜ ë°œí‘œëŠ” í”¼í•˜ì„¸ìš”.',
    criticalPhysical:'ì‹ ì²´ ë¦¬ë“¬ ì „í™˜ê¸°',criticalEmotional:'ê°ì„± ë¦¬ë“¬ ì „í™˜ê¸°',criticalIntellectual:'ì§€ì„± ë¦¬ë“¬ ì „í™˜ê¸°',
    months:'1ì›”,2ì›”,3ì›”,4ì›”,5ì›”,6ì›”,7ì›”,8ì›”,9ì›”,10ì›”,11ì›”,12ì›”',dateFormat:'{m} {d}ì¼',compatTitle:'ê¶í•© ê²°ê³¼',compatScore:'ê¶í•© ì ìˆ˜'},
  en:{title:'Biorhythm Calculator',subtitle:'Discover your physical, emotional & intellectual rhythms',birthLabel:'Date of Birth',calculate:'Calculate',compatLabel:'Compatibility Mode',partnerLabel:"Partner's Birthdate",graphTitle:'Biorhythm Graph',physical:'Physical',emotional:'Emotional',intellectual:'Intellectual',criticalTitle:'âš¡ Critical Days',share:'Share Result',loader:'Loading...',ad:'Ad Space',today:'Today',
    statusHigh:'Peak',statusMid:'Moderate',statusLow:'Low',statusCritical:'Transition',
    descPhysicalHigh:'High energy day! Great for exercise and physical challenges.',descPhysicalMid:'Average condition. Pace yourself.',descPhysicalLow:'Energy may be low. Rest and recover.',descPhysicalCritical:'Physical cycle is transitioning. Avoid strenuous activity.',
    descEmotionalHigh:'Rich emotional day! Perfect for creativity and connection.',descEmotionalMid:'Emotionally stable. Carry on as usual.',descEmotionalLow:'Emotional fluctuations possible. Try meditation or a walk.',descEmotionalCritical:'Emotional transition day. Postpone major decisions.',
    descIntellectualHigh:'Sharp mind today! Ideal for learning and analysis.',descIntellectualMid:'Average focus level.',descIntellectualLow:'Focus may waver. Stick to simple tasks.',descIntellectualCritical:'Intellectual transition. Avoid exams or presentations.',
    criticalPhysical:'Physical transition',criticalEmotional:'Emotional transition',criticalIntellectual:'Intellectual transition',
    months:'Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec',dateFormat:'{m} {d}',compatTitle:'Compatibility',compatScore:'Score'},
  ja:{title:'ãƒã‚¤ã‚ªãƒªã‚ºãƒ è¨ˆç®—æ©Ÿ',subtitle:'èª•ç”Ÿæ—¥ã‹ã‚‰èº«ä½“ãƒ»æ„Ÿæƒ…ãƒ»çŸ¥æ€§ã®ãƒªã‚ºãƒ ã‚’ç¢ºèª',birthLabel:'ç”Ÿå¹´æœˆæ—¥',calculate:'è¨ˆç®—ã™ã‚‹',compatLabel:'ç›¸æ€§ãƒ¢ãƒ¼ãƒ‰',partnerLabel:'ç›¸æ‰‹ã®ç”Ÿå¹´æœˆæ—¥',graphTitle:'ãƒã‚¤ã‚ªãƒªã‚ºãƒ ã‚°ãƒ©ãƒ•',physical:'èº«ä½“',emotional:'æ„Ÿæƒ…',intellectual:'çŸ¥æ€§',criticalTitle:'âš¡ æ³¨æ„æ—¥',share:'å…±æœ‰',loader:'èª­ã¿è¾¼ã¿ä¸­...',ad:'åºƒå‘Š',today:'ä»Šæ—¥',
    statusHigh:'æœ€é«˜æ½®',statusMid:'æ™®é€š',statusLow:'ä½èª¿',statusCritical:'è»¢æ›æœŸ',
    descPhysicalHigh:'ã‚¨ãƒãƒ«ã‚®ãƒ¼ã«æº€ã¡ãŸæ—¥ï¼é‹å‹•ã«æœ€é©ã§ã™ã€‚',descPhysicalMid:'å¹³å‡çš„ãªã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³ã§ã™ã€‚',descPhysicalLow:'ç–²ã‚Œã‚„ã™ã„æ™‚æœŸã§ã™ã€‚ååˆ†ãªä¼‘æ¯ã‚’ã€‚',descPhysicalCritical:'èº«ä½“ãƒªã‚ºãƒ ã®è»¢æ›æ—¥ã§ã™ã€‚',
    descEmotionalHigh:'æ„Ÿæ€§è±Šã‹ãªæ—¥ï¼å‰µä½œæ´»å‹•ã«å‘ã„ã¦ã„ã¾ã™ã€‚',descEmotionalMid:'æ„Ÿæƒ…ã¯å®‰å®šã—ã¦ã„ã¾ã™ã€‚',descEmotionalLow:'æ„Ÿæƒ…ã®æµ®ãæ²ˆã¿ãŒã‚ã‚‹ã‹ã‚‚ã€‚',descEmotionalCritical:'æ„Ÿæƒ…ãƒªã‚ºãƒ ã®è»¢æ›æ—¥ã§ã™ã€‚',
    descIntellectualHigh:'é ­ã®å›è»¢ãŒé€Ÿã„æ—¥ï¼å­¦ç¿’ã«æœ€é©ã€‚',descIntellectualMid:'æ™®é€šã®é›†ä¸­åŠ›ã§ã™ã€‚',descIntellectualLow:'é›†ä¸­åŠ›ãŒè½ã¡ã‚‹ã‹ã‚‚ã€‚',descIntellectualCritical:'çŸ¥æ€§ãƒªã‚ºãƒ ã®è»¢æ›æ—¥ã§ã™ã€‚',
    criticalPhysical:'èº«ä½“ãƒªã‚ºãƒ è»¢æ›',criticalEmotional:'æ„Ÿæƒ…ãƒªã‚ºãƒ è»¢æ›',criticalIntellectual:'çŸ¥æ€§ãƒªã‚ºãƒ è»¢æ›',
    months:'1æœˆ,2æœˆ,3æœˆ,4æœˆ,5æœˆ,6æœˆ,7æœˆ,8æœˆ,9æœˆ,10æœˆ,11æœˆ,12æœˆ',dateFormat:'{m}{d}æ—¥',compatTitle:'ç›¸æ€§çµæœ',compatScore:'ç›¸æ€§ã‚¹ã‚³ã‚¢'},
  zh:{title:'ç”Ÿç‰©èŠ‚å¾‹è®¡ç®—å™¨',subtitle:'é€šè¿‡ç”Ÿæ—¥æŸ¥çœ‹èº«ä½“Â·æƒ…æ„ŸÂ·æ™ºåŠ›èŠ‚å¾‹',birthLabel:'å‡ºç”Ÿæ—¥æœŸ',calculate:'è®¡ç®—',compatLabel:'é…å¯¹æ¨¡å¼',partnerLabel:'å¯¹æ–¹å‡ºç”Ÿæ—¥æœŸ',graphTitle:'ç”Ÿç‰©èŠ‚å¾‹å›¾è¡¨',physical:'èº«ä½“',emotional:'æƒ…æ„Ÿ',intellectual:'æ™ºåŠ›',criticalTitle:'âš¡ éœ€æ³¨æ„çš„æ—¥å­',share:'åˆ†äº«ç»“æœ',loader:'åŠ è½½ä¸­...',ad:'å¹¿å‘Šä½',today:'ä»Šå¤©',
    statusHigh:'å·…å³°',statusMid:'ä¸€èˆ¬',statusLow:'ä½è¿·',statusCritical:'è½¬æ¢æœŸ',
    descPhysicalHigh:'ç²¾åŠ›å……æ²›çš„ä¸€å¤©ï¼é€‚åˆè¿åŠ¨ã€‚',descPhysicalMid:'èº«ä½“çŠ¶æ€ä¸€èˆ¬ã€‚',descPhysicalLow:'å®¹æ˜“ç–²åŠ³ï¼Œæ³¨æ„ä¼‘æ¯ã€‚',descPhysicalCritical:'èº«ä½“èŠ‚å¾‹è½¬æ¢æ—¥ã€‚',
    descEmotionalHigh:'æƒ…æ„Ÿä¸°å¯Œçš„ä¸€å¤©ï¼é€‚åˆåˆ›ä½œã€‚',descEmotionalMid:'æƒ…ç»ªç¨³å®šã€‚',descEmotionalLow:'æƒ…ç»ªå¯èƒ½æ³¢åŠ¨ã€‚',descEmotionalCritical:'æƒ…æ„ŸèŠ‚å¾‹è½¬æ¢æ—¥ã€‚',
    descIntellectualHigh:'æ€ç»´æ•æ·ï¼é€‚åˆå­¦ä¹ ã€‚',descIntellectualMid:'é›†ä¸­åŠ›ä¸€èˆ¬ã€‚',descIntellectualLow:'æ³¨æ„åŠ›å¯èƒ½ä¸‹é™ã€‚',descIntellectualCritical:'æ™ºåŠ›èŠ‚å¾‹è½¬æ¢æ—¥ã€‚',
    criticalPhysical:'èº«ä½“èŠ‚å¾‹è½¬æ¢',criticalEmotional:'æƒ…æ„ŸèŠ‚å¾‹è½¬æ¢',criticalIntellectual:'æ™ºåŠ›èŠ‚å¾‹è½¬æ¢',
    months:'1æœˆ,2æœˆ,3æœˆ,4æœˆ,5æœˆ,6æœˆ,7æœˆ,8æœˆ,9æœˆ,10æœˆ,11æœˆ,12æœˆ',dateFormat:'{m}{d}æ—¥',compatTitle:'é…å¯¹ç»“æœ',compatScore:'é…å¯¹åˆ†æ•°'},
  es:{title:'Calculadora de Biorritmo',subtitle:'Descubre tus ritmos fÃ­sico, emocional e intelectual',birthLabel:'Fecha de nacimiento',calculate:'Calcular',compatLabel:'Modo compatibilidad',partnerLabel:'Fecha de la pareja',graphTitle:'GrÃ¡fico de Biorritmo',physical:'FÃ­sico',emotional:'Emocional',intellectual:'Intelectual',criticalTitle:'âš¡ DÃ­as crÃ­ticos',share:'Compartir',loader:'Cargando...',ad:'Espacio publicitario',today:'Hoy',statusHigh:'Pico',statusMid:'Medio',statusLow:'Bajo',statusCritical:'TransiciÃ³n',descPhysicalHigh:'Â¡DÃ­a de mucha energÃ­a!',descPhysicalMid:'CondiciÃ³n normal.',descPhysicalLow:'EnergÃ­a baja. Descansa.',descPhysicalCritical:'TransiciÃ³n fÃ­sica.',descEmotionalHigh:'Â¡DÃ­a emocionalmente rico!',descEmotionalMid:'Estable.',descEmotionalLow:'Fluctuaciones posibles.',descEmotionalCritical:'TransiciÃ³n emocional.',descIntellectualHigh:'Â¡Mente aguda!',descIntellectualMid:'ConcentraciÃ³n normal.',descIntellectualLow:'La concentraciÃ³n puede bajar.',descIntellectualCritical:'TransiciÃ³n intelectual.',criticalPhysical:'TransiciÃ³n fÃ­sica',criticalEmotional:'TransiciÃ³n emocional',criticalIntellectual:'TransiciÃ³n intelectual',months:'Ene,Feb,Mar,Abr,May,Jun,Jul,Ago,Sep,Oct,Nov,Dic',dateFormat:'{d} {m}',compatTitle:'Compatibilidad',compatScore:'PuntuaciÃ³n'},
  de:{title:'Biorhythmus-Rechner',subtitle:'Entdecke deine kÃ¶rperlichen, emotionalen & geistigen Rhythmen',birthLabel:'Geburtsdatum',calculate:'Berechnen',compatLabel:'KompatibilitÃ¤tsmodus',partnerLabel:'Geburtsdatum des Partners',graphTitle:'Biorhythmus-Grafik',physical:'KÃ¶rperlich',emotional:'Emotional',intellectual:'Geistig',criticalTitle:'âš¡ Kritische Tage',share:'Teilen',loader:'Laden...',ad:'Werbung',today:'Heute',statusHigh:'Hoch',statusMid:'Mittel',statusLow:'Niedrig',statusCritical:'Ãœbergang',descPhysicalHigh:'Energiegeladener Tag!',descPhysicalMid:'Normaler Zustand.',descPhysicalLow:'Wenig Energie. Ruhe dich aus.',descPhysicalCritical:'KÃ¶rperlicher Ãœbergang.',descEmotionalHigh:'Emotional reicher Tag!',descEmotionalMid:'Stabil.',descEmotionalLow:'Schwankungen mÃ¶glich.',descEmotionalCritical:'Emotionaler Ãœbergang.',descIntellectualHigh:'Scharfer Verstand!',descIntellectualMid:'Normale Konzentration.',descIntellectualLow:'Konzentration kÃ¶nnte nachlassen.',descIntellectualCritical:'Geistiger Ãœbergang.',criticalPhysical:'KÃ¶rperlicher Ãœbergang',criticalEmotional:'Emotionaler Ãœbergang',criticalIntellectual:'Geistiger Ãœbergang',months:'Jan,Feb,MÃ¤r,Apr,Mai,Jun,Jul,Aug,Sep,Okt,Nov,Dez',dateFormat:'{d}. {m}',compatTitle:'KompatibilitÃ¤t',compatScore:'Punktzahl'},
  fr:{title:'Calculateur de Biorythme',subtitle:'DÃ©couvrez vos rythmes physique, Ã©motionnel et intellectuel',birthLabel:'Date de naissance',calculate:'Calculer',compatLabel:'Mode compatibilitÃ©',partnerLabel:'Date du partenaire',graphTitle:'Graphique du Biorythme',physical:'Physique',emotional:'Ã‰motionnel',intellectual:'Intellectuel',criticalTitle:'âš¡ Jours critiques',share:'Partager',loader:'Chargement...',ad:'Espace pub',today:"Aujourd'hui",statusHigh:'Sommet',statusMid:'Moyen',statusLow:'Bas',statusCritical:'Transition',descPhysicalHigh:"JournÃ©e pleine d'Ã©nergie!",descPhysicalMid:'Condition normale.',descPhysicalLow:'Ã‰nergie basse. Reposez-vous.',descPhysicalCritical:'Transition physique.',descEmotionalHigh:'JournÃ©e Ã©motionnellement riche!',descEmotionalMid:'Stable.',descEmotionalLow:'Fluctuations possibles.',descEmotionalCritical:'Transition Ã©motionnelle.',descIntellectualHigh:'Esprit vif!',descIntellectualMid:'Concentration normale.',descIntellectualLow:'La concentration peut baisser.',descIntellectualCritical:'Transition intellectuelle.',criticalPhysical:'Transition physique',criticalEmotional:'Transition Ã©motionnelle',criticalIntellectual:'Transition intellectuelle',months:'Jan,FÃ©v,Mar,Avr,Mai,Jun,Jul,AoÃ»,Sep,Oct,Nov,DÃ©c',dateFormat:'{d} {m}',compatTitle:'CompatibilitÃ©',compatScore:'Score'},
  pt:{title:'Calculadora de Biorritmo',subtitle:'Descubra seus ritmos fÃ­sico, emocional e intelectual',birthLabel:'Data de nascimento',calculate:'Calcular',compatLabel:'Modo compatibilidade',partnerLabel:'Data do parceiro',graphTitle:'GrÃ¡fico de Biorritmo',physical:'FÃ­sico',emotional:'Emocional',intellectual:'Intelectual',criticalTitle:'âš¡ Dias crÃ­ticos',share:'Compartilhar',loader:'Carregando...',ad:'EspaÃ§o publicitÃ¡rio',today:'Hoje',statusHigh:'Pico',statusMid:'MÃ©dio',statusLow:'Baixo',statusCritical:'TransiÃ§Ã£o',descPhysicalHigh:'Dia cheio de energia!',descPhysicalMid:'CondiÃ§Ã£o normal.',descPhysicalLow:'Energia baixa. Descanse.',descPhysicalCritical:'TransiÃ§Ã£o fÃ­sica.',descEmotionalHigh:'Dia emocionalmente rico!',descEmotionalMid:'EstÃ¡vel.',descEmotionalLow:'FlutuaÃ§Ãµes possÃ­veis.',descEmotionalCritical:'TransiÃ§Ã£o emocional.',descIntellectualHigh:'Mente afiada!',descIntellectualMid:'ConcentraÃ§Ã£o normal.',descIntellectualLow:'A concentraÃ§Ã£o pode cair.',descIntellectualCritical:'TransiÃ§Ã£o intelectual.',criticalPhysical:'TransiÃ§Ã£o fÃ­sica',criticalEmotional:'TransiÃ§Ã£o emocional',criticalIntellectual:'TransiÃ§Ã£o intelectual',months:'Jan,Fev,Mar,Abr,Mai,Jun,Jul,Ago,Set,Out,Nov,Dez',dateFormat:'{d} {m}',compatTitle:'Compatibilidade',compatScore:'PontuaÃ§Ã£o'},
  ru:{title:'ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ‘Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ¾Ğ²',subtitle:'Ğ£Ğ·Ğ½Ğ°Ğ¹Ñ‚Ğµ ÑĞ²Ğ¾Ğ¸ Ñ„Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ, ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ€Ğ¸Ñ‚Ğ¼Ñ‹',birthLabel:'Ğ”Ğ°Ñ‚Ğ° Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ',calculate:'Ğ Ğ°ÑÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ',compatLabel:'Ğ ĞµĞ¶Ğ¸Ğ¼ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸',partnerLabel:'Ğ”Ğ°Ñ‚Ğ° Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ Ğ¿Ğ°Ñ€Ñ‚Ğ½Ñ‘Ñ€Ğ°',graphTitle:'Ğ“Ñ€Ğ°Ñ„Ğ¸Ğº Ğ‘Ğ¸Ğ¾Ñ€Ğ¸Ñ‚Ğ¼Ğ¾Ğ²',physical:'Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹',emotional:'Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹',intellectual:'Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹',criticalTitle:'âš¡ ĞšÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ğ´Ğ½Ğ¸',share:'ĞŸĞ¾Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒÑÑ',loader:'Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ°...',ad:'Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ°',today:'Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ',statusHigh:'ĞŸĞ¸Ğº',statusMid:'Ğ¡Ñ€ĞµĞ´Ğ½Ğ¸Ğ¹',statusLow:'ĞĞ¸Ğ·ĞºĞ¸Ğ¹',statusCritical:'ĞŸĞµÑ€ĞµÑ…Ğ¾Ğ´',descPhysicalHigh:'Ğ”ĞµĞ½ÑŒ Ğ¿Ğ¾Ğ»Ğ¾Ğ½ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸!',descPhysicalMid:'ĞĞ±Ñ‹Ñ‡Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ.',descPhysicalLow:'ĞœĞ°Ğ»Ğ¾ ÑĞ½ĞµÑ€Ğ³Ğ¸Ğ¸. ĞÑ‚Ğ´Ñ‹Ñ…Ğ°Ğ¹Ñ‚Ğµ.',descPhysicalCritical:'Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´.',descEmotionalHigh:'Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ğ¾ Ğ½Ğ°ÑÑ‹Ñ‰ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ!',descEmotionalMid:'Ğ¡Ñ‚Ğ°Ğ±Ğ¸Ğ»ÑŒĞ½Ğ¾.',descEmotionalLow:'Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ñ‹ ĞºĞ¾Ğ»ĞµĞ±Ğ°Ğ½Ğ¸Ñ.',descEmotionalCritical:'Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´.',descIntellectualHigh:'ĞÑÑ‚Ñ€Ñ‹Ğ¹ ÑƒĞ¼ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ!',descIntellectualMid:'ĞĞ±Ñ‹Ñ‡Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ñ†Ğ¸Ñ.',descIntellectualLow:'ĞšĞ¾Ğ½Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ¾Ğ¶ĞµÑ‚ ÑĞ½Ğ¸Ğ·Ğ¸Ñ‚ÑŒÑÑ.',descIntellectualCritical:'Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´.',criticalPhysical:'Ğ¤Ğ¸Ğ·Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´',criticalEmotional:'Ğ­Ğ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´',criticalIntellectual:'Ğ˜Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµÑ…Ğ¾Ğ´',months:'Ğ¯Ğ½Ğ²,Ğ¤ĞµĞ²,ĞœĞ°Ñ€,ĞĞ¿Ñ€,ĞœĞ°Ğ¹,Ğ˜ÑĞ½,Ğ˜ÑĞ»,ĞĞ²Ğ³,Ğ¡ĞµĞ½,ĞĞºÑ‚,ĞĞ¾Ñ,Ğ”ĞµĞº',dateFormat:'{d} {m}',compatTitle:'Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ',compatScore:'ĞÑ†ĞµĞ½ĞºĞ°'},
  hi:{title:'à¤¬à¤¾à¤¯à¥‹à¤°à¤¿à¤¦à¤® à¤•à¥ˆà¤²à¤•à¥à¤²à¥‡à¤Ÿà¤°',subtitle:'à¤…à¤ªà¤¨à¥€ à¤¶à¤¾à¤°à¥€à¤°à¤¿à¤•, à¤­à¤¾à¤µà¤¨à¤¾à¤¤à¥à¤®à¤• à¤”à¤° à¤¬à¥Œà¤¦à¥à¤§à¤¿à¤• à¤²à¤¯ à¤œà¤¾à¤¨à¥‡à¤‚',birthLabel:'à¤œà¤¨à¥à¤® à¤¤à¤¿à¤¥à¤¿',calculate:'à¤—à¤£à¤¨à¤¾ à¤•à¤°à¥‡à¤‚',compatLabel:'à¤…à¤¨à¥à¤•à¥‚à¤²à¤¤à¤¾ à¤®à¥‹à¤¡',partnerLabel:'à¤¸à¤¾à¤¥à¥€ à¤•à¥€ à¤œà¤¨à¥à¤® à¤¤à¤¿à¤¥à¤¿',graphTitle:'à¤¬à¤¾à¤¯à¥‹à¤°à¤¿à¤¦à¤® à¤—à¥à¤°à¤¾à¤«',physical:'à¤¶à¤¾à¤°à¥€à¤°à¤¿à¤•',emotional:'à¤­à¤¾à¤µà¤¨à¤¾à¤¤à¥à¤®à¤•',intellectual:'à¤¬à¥Œà¤¦à¥à¤§à¤¿à¤•',criticalTitle:'âš¡ à¤®à¤¹à¤¤à¥à¤µà¤ªà¥‚à¤°à¥à¤£ à¤¦à¤¿à¤¨',share:'à¤¸à¤¾à¤à¤¾ à¤•à¤°à¥‡à¤‚',loader:'à¤²à¥‹à¤¡ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ...',ad:'à¤µà¤¿à¤œà¥à¤à¤¾à¤ªà¤¨',today:'à¤†à¤œ',statusHigh:'à¤šà¤°à¤®',statusMid:'à¤®à¤§à¥à¤¯à¤®',statusLow:'à¤¨à¤¿à¤®à¥à¤¨',statusCritical:'à¤¸à¤‚à¤•à¥à¤°à¤®à¤£',descPhysicalHigh:'à¤Šà¤°à¥à¤œà¤¾ à¤¸à¥‡ à¤­à¤°à¤ªà¥‚à¤° à¤¦à¤¿à¤¨!',descPhysicalMid:'à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯ à¤¸à¥à¤¥à¤¿à¤¤à¤¿à¥¤',descPhysicalLow:'à¤•à¤® à¤Šà¤°à¥à¤œà¤¾à¥¤ à¤†à¤°à¤¾à¤® à¤•à¤°à¥‡à¤‚à¥¤',descPhysicalCritical:'à¤¶à¤¾à¤°à¥€à¤°à¤¿à¤• à¤¸à¤‚à¤•à¥à¤°à¤®à¤£à¥¤',descEmotionalHigh:'à¤­à¤¾à¤µà¤¨à¤¾à¤¤à¥à¤®à¤• à¤°à¥‚à¤ª à¤¸à¥‡ à¤¸à¤®à¥ƒà¤¦à¥à¤§!',descEmotionalMid:'à¤¸à¥à¤¥à¤¿à¤°à¥¤',descEmotionalLow:'à¤‰à¤¤à¤¾à¤°-à¤šà¤¢à¤¼à¤¾à¤µ à¤¸à¤‚à¤­à¤µà¥¤',descEmotionalCritical:'à¤­à¤¾à¤µà¤¨à¤¾à¤¤à¥à¤®à¤• à¤¸à¤‚à¤•à¥à¤°à¤®à¤£à¥¤',descIntellectualHigh:'à¤¤à¥‡à¤œà¤¼ à¤¦à¤¿à¤®à¤¾à¤—!',descIntellectualMid:'à¤¸à¤¾à¤®à¤¾à¤¨à¥à¤¯ à¤à¤•à¤¾à¤—à¥à¤°à¤¤à¤¾à¥¤',descIntellectualLow:'à¤à¤•à¤¾à¤—à¥à¤°à¤¤à¤¾ à¤•à¤® à¤¹à¥‹ à¤¸à¤•à¤¤à¥€ à¤¹à¥ˆà¥¤',descIntellectualCritical:'à¤¬à¥Œà¤¦à¥à¤§à¤¿à¤• à¤¸à¤‚à¤•à¥à¤°à¤®à¤£à¥¤',criticalPhysical:'à¤¶à¤¾à¤°à¥€à¤°à¤¿à¤• à¤¸à¤‚à¤•à¥à¤°à¤®à¤£',criticalEmotional:'à¤­à¤¾à¤µà¤¨à¤¾à¤¤à¥à¤®à¤• à¤¸à¤‚à¤•à¥à¤°à¤®à¤£',criticalIntellectual:'à¤¬à¥Œà¤¦à¥à¤§à¤¿à¤• à¤¸à¤‚à¤•à¥à¤°à¤®à¤£',months:'à¤œà¤¨,à¤«à¤¼à¤°,à¤®à¤¾à¤°à¥à¤š,à¤…à¤ªà¥à¤°à¥ˆ,à¤®à¤ˆ,à¤œà¥‚à¤¨,à¤œà¥à¤²,à¤…à¤—,à¤¸à¤¿à¤¤,à¤…à¤•à¥à¤Ÿà¥‚,à¤¨à¤µ,à¤¦à¤¿à¤¸',dateFormat:'{d} {m}',compatTitle:'à¤…à¤¨à¥à¤•à¥‚à¤²à¤¤à¤¾',compatScore:'à¤…à¤‚à¤•'},
  id:{title:'Kalkulator Biorhythm',subtitle:'Temukan ritme fisik, emosional & intelektual Anda',birthLabel:'Tanggal Lahir',calculate:'Hitung',compatLabel:'Mode Kecocokan',partnerLabel:'Tanggal Lahir Pasangan',graphTitle:'Grafik Biorhythm',physical:'Fisik',emotional:'Emosional',intellectual:'Intelektual',criticalTitle:'âš¡ Hari Kritis',share:'Bagikan',loader:'Memuat...',ad:'Iklan',today:'Hari ini',statusHigh:'Puncak',statusMid:'Sedang',statusLow:'Rendah',statusCritical:'Transisi',descPhysicalHigh:'Hari penuh energi!',descPhysicalMid:'Kondisi normal.',descPhysicalLow:'Energi rendah. Istirahat.',descPhysicalCritical:'Transisi fisik.',descEmotionalHigh:'Hari kaya emosi!',descEmotionalMid:'Stabil.',descEmotionalLow:'Fluktuasi mungkin terjadi.',descEmotionalCritical:'Transisi emosional.',descIntellectualHigh:'Pikiran tajam!',descIntellectualMid:'Konsentrasi normal.',descIntellectualLow:'Konsentrasi mungkin turun.',descIntellectualCritical:'Transisi intelektual.',criticalPhysical:'Transisi fisik',criticalEmotional:'Transisi emosional',criticalIntellectual:'Transisi intelektual',months:'Jan,Feb,Mar,Apr,Mei,Jun,Jul,Agu,Sep,Okt,Nov,Des',dateFormat:'{d} {m}',compatTitle:'Kecocokan',compatScore:'Skor'},
  tr:{title:'Biyoritm HesaplayÄ±cÄ±',subtitle:'Fiziksel, duygusal ve entelektÃ¼el ritimlerinizi keÅŸfedin',birthLabel:'DoÄŸum Tarihi',calculate:'Hesapla',compatLabel:'Uyumluluk Modu',partnerLabel:'Partnerin DoÄŸum Tarihi',graphTitle:'Biyoritm GrafiÄŸi',physical:'Fiziksel',emotional:'Duygusal',intellectual:'EntelektÃ¼el',criticalTitle:'âš¡ Kritik GÃ¼nler',share:'PaylaÅŸ',loader:'YÃ¼kleniyor...',ad:'Reklam',today:'BugÃ¼n',statusHigh:'Zirve',statusMid:'Orta',statusLow:'DÃ¼ÅŸÃ¼k',statusCritical:'GeÃ§iÅŸ',descPhysicalHigh:'Enerji dolu gÃ¼n!',descPhysicalMid:'Normal durum.',descPhysicalLow:'DÃ¼ÅŸÃ¼k enerji. Dinlenin.',descPhysicalCritical:'Fiziksel geÃ§iÅŸ.',descEmotionalHigh:'Duygusal aÃ§Ä±dan zengin!',descEmotionalMid:'Stabil.',descEmotionalLow:'Dalgalanmalar olabilir.',descEmotionalCritical:'Duygusal geÃ§iÅŸ.',descIntellectualHigh:'Keskin zihin!',descIntellectualMid:'Normal konsantrasyon.',descIntellectualLow:'Konsantrasyon dÃ¼ÅŸebilir.',descIntellectualCritical:'EntelektÃ¼el geÃ§iÅŸ.',criticalPhysical:'Fiziksel geÃ§iÅŸ',criticalEmotional:'Duygusal geÃ§iÅŸ',criticalIntellectual:'EntelektÃ¼el geÃ§iÅŸ',months:'Oca,Åub,Mar,Nis,May,Haz,Tem,AÄŸu,Eyl,Eki,Kas,Ara',dateFormat:'{d} {m}',compatTitle:'Uyumluluk',compatScore:'Puan'}
};

let currentLang = localStorage.getItem('bio-lang') || (navigator.language||'en').slice(0,2);
if(!LANG[currentLang]) currentLang = 'en';

function t(key){ return (LANG[currentLang]||LANG.en)[key] || (LANG.en)[key] || key; }

function updateUI(){
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const k = el.getAttribute('data-i18n');
    if(k) el.textContent = t(k);
  });
  document.querySelectorAll('.lang-option').forEach(btn=>{
    btn.classList.toggle('active', btn.dataset.lang===currentLang);
  });
  document.documentElement.lang = currentLang;
}

/* â”€â”€â”€ Stars â”€â”€â”€ */
function createStars(){
  const c = document.getElementById('stars');
  c.innerHTML = '';
  for(let i=0;i<80;i++){
    const s = document.createElement('div');
    s.className = 'star' + (Math.random()>0.85?' bright':'');
    s.style.left = Math.random()*100+'%';
    s.style.top = Math.random()*100+'%';
    s.style.opacity = 0.2+Math.random()*0.6;
    s.style.animationDelay = Math.random()*4+'s';
    c.appendChild(s);
  }
}

/* â”€â”€â”€ Biorhythm Math â”€â”€â”€ */
const CYCLES = [
  {name:'physical', length:23, color:'#e74c3c', glow:'rgba(231,76,60,0.4)', icon:'ğŸ’ª'},
  {name:'emotional', length:28, color:'#3498db', glow:'rgba(52,152,219,0.4)', icon:'ğŸ’™'},
  {name:'intellectual', length:33, color:'#f39c12', glow:'rgba(243,156,18,0.4)', icon:'ğŸ§ '}
];

function daysBetween(d1,d2){
  const a=new Date(d1),b=new Date(d2);
  a.setHours(0,0,0,0);b.setHours(0,0,0,0);
  return Math.round((b-a)/(86400000));
}

function bioValue(birthDate, targetDate, cycleLen){
  const days = daysBetween(birthDate, targetDate);
  return Math.sin(2*Math.PI*days/cycleLen)*100;
}

/* â”€â”€â”€ Format Date â”€â”€â”€ */
function fmtDate(date){
  const d = new Date(date);
  const months = t('months').split(',');
  const m = months[d.getMonth()];
  const day = d.getDate();
  return t('dateFormat').replace('{m}',m).replace('{d}',day);
}

/* â”€â”€â”€ Canvas Graph â”€â”€â”€ */
const canvas = document.getElementById('graphCanvas');
const ctx = canvas.getContext('2d');
let graphData = null;
let animProgress = 0;
let animFrame = null;
let selectedDay = 0;

function resizeCanvas(){
  const wrap = canvas.parentElement;
  const rect = wrap.getBoundingClientRect();
  const dpr = window.devicePixelRatio||1;
  canvas.width = rect.width*dpr;
  canvas.height = rect.height*dpr;
  ctx.setTransform(dpr,0,0,dpr,0,0);
  canvas.style.width = rect.width+'px';
  canvas.style.height = rect.height+'px';
  if(graphData) drawGraph(1);
}

function drawGraph(progress){
  const w = canvas.width/(window.devicePixelRatio||1);
  const h = canvas.height/(window.devicePixelRatio||1);
  const pad = {top:20,bottom:30,left:36,right:16};
  const gw = w-pad.left-pad.right;
  const gh = h-pad.top-pad.bottom;
  const cx = pad.left + gw/2;

  ctx.clearRect(0,0,w,h);

  // Grid lines
  ctx.strokeStyle = 'rgba(108,92,231,0.06)';
  ctx.lineWidth = 1;
  for(let i=0;i<=4;i++){
    const y = pad.top + (gh/4)*i;
    ctx.beginPath();ctx.moveTo(pad.left,y);ctx.lineTo(w-pad.right,y);ctx.stroke();
  }

  // Y-axis labels
  ctx.fillStyle = 'rgba(150,148,170,0.4)';
  ctx.font = '10px Outfit';
  ctx.textAlign = 'right';
  ctx.fillText('+100', pad.left-6, pad.top+4);
  ctx.fillText('0', pad.left-6, pad.top+gh/2+4);
  ctx.fillText('-100', pad.left-6, pad.top+gh+4);

  // Zero line
  ctx.strokeStyle = 'rgba(108,92,231,0.15)';
  ctx.lineWidth = 1;
  ctx.setLineDash([4,4]);
  ctx.beginPath();ctx.moveTo(pad.left, pad.top+gh/2);ctx.lineTo(w-pad.right, pad.top+gh/2);ctx.stroke();
  ctx.setLineDash([]);

  // Today line
  ctx.strokeStyle = 'rgba(162,155,254,0.3)';
  ctx.lineWidth = 1;
  ctx.setLineDash([3,3]);
  ctx.beginPath();ctx.moveTo(cx, pad.top);ctx.lineTo(cx, pad.top+gh);ctx.stroke();
  ctx.setLineDash([]);

  // Today label
  ctx.fillStyle = 'rgba(162,155,254,0.5)';
  ctx.font = '10px Outfit';
  ctx.textAlign = 'center';
  ctx.fillText(t('today'), cx, pad.top+gh+16);

  // X-axis date labels
  ctx.fillStyle = 'rgba(150,148,170,0.35)';
  ctx.font = '9px Outfit';
  const totalDays = 31;
  for(let i=0;i<totalDays;i+=5){
    const x = pad.left + (i/(totalDays-1))*gw;
    const date = new Date(graphData.today);
    date.setDate(date.getDate() + i - 15);
    ctx.fillText(fmtDate(date), x, pad.top+gh+16);
  }

  // Draw curves
  const drawPts = Math.floor(totalDays * progress);
  CYCLES.forEach((cycle,ci)=>{
    const values = graphData.values[ci];
    ctx.strokeStyle = cycle.color;
    ctx.lineWidth = 2.5;
    ctx.shadowColor = cycle.glow;
    ctx.shadowBlur = 12;
    ctx.beginPath();
    for(let i=0;i<=drawPts&&i<values.length;i++){
      const x = pad.left + (i/(totalDays-1))*gw;
      const y = pad.top + gh/2 - (values[i]/100)*(gh/2);
      if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
    }
    ctx.stroke();
    ctx.shadowBlur=0;

    // Critical dots (zero crossings)
    if(progress>=1){
      for(let i=1;i<values.length;i++){
        if((values[i-1]>0&&values[i]<=0)||(values[i-1]<0&&values[i]>=0)){
          const x = pad.left + (i/(totalDays-1))*gw;
          const y = pad.top + gh/2;
          ctx.fillStyle = cycle.color;
          ctx.beginPath();ctx.arc(x,y,4,0,Math.PI*2);ctx.fill();
          ctx.fillStyle = 'rgba(10,10,26,0.6)';
          ctx.beginPath();ctx.arc(x,y,2,0,Math.PI*2);ctx.fill();
        }
      }
    }
  });

  // Partner curves (if compat mode)
  if(graphData.partnerValues){
    CYCLES.forEach((cycle,ci)=>{
      const values = graphData.partnerValues[ci];
      ctx.strokeStyle = cycle.color;
      ctx.lineWidth = 1.5;
      ctx.globalAlpha = 0.35;
      ctx.setLineDash([6,4]);
      ctx.beginPath();
      for(let i=0;i<=drawPts&&i<values.length;i++){
        const x = pad.left + (i/(totalDays-1))*gw;
        const y = pad.top + gh/2 - (values[i]/100)*(gh/2);
        if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
      }
      ctx.stroke();
      ctx.setLineDash([]);
      ctx.globalAlpha = 1;
    });
  }

  // Selected day marker
  if(progress>=1){
    const sx = pad.left + ((selectedDay+15)/(totalDays-1))*gw;
    ctx.strokeStyle = 'rgba(232,230,240,0.2)';
    ctx.lineWidth = 1;
    ctx.beginPath();ctx.moveTo(sx,pad.top);ctx.lineTo(sx,pad.top+gh);ctx.stroke();
    CYCLES.forEach((cycle,ci)=>{
      const v = graphData.values[ci][selectedDay+15];
      if(v!==undefined){
        const y = pad.top + gh/2 - (v/100)*(gh/2);
        ctx.fillStyle = cycle.color;
        ctx.shadowColor = cycle.glow;
        ctx.shadowBlur = 10;
        ctx.beginPath();ctx.arc(sx,y,5,0,Math.PI*2);ctx.fill();
        ctx.shadowBlur=0;
        ctx.fillStyle = '#fff';
        ctx.beginPath();ctx.arc(sx,y,2,0,Math.PI*2);ctx.fill();
      }
    });
  }
}

function animateGraph(){
  if(animFrame) cancelAnimationFrame(animFrame);
  animProgress = 0;
  function step(){
    animProgress += 0.035;
    if(animProgress > 1) animProgress = 1;
    drawGraph(animProgress);
    if(animProgress < 1) animFrame = requestAnimationFrame(step);
  }
  step();
}

/* â”€â”€â”€ Calculate â”€â”€â”€ */
function calculate(){
  const birthInput = document.getElementById('birthDate').value;
  if(!birthInput) return;

  const today = new Date();
  today.setHours(0,0,0,0);
  const birth = new Date(birthInput);

  const totalDays = 31;
  const values = CYCLES.map(c=>{
    const arr = [];
    for(let i=-15;i<=15;i++){
      const d = new Date(today);
      d.setDate(d.getDate()+i);
      arr.push(bioValue(birth,d,c.length));
    }
    return arr;
  });

  graphData = {today, birth, values, partnerValues: null};

  // Partner
  const partnerInput = document.getElementById('partnerDate').value;
  if(document.getElementById('compatToggle').classList.contains('on') && partnerInput){
    const pBirth = new Date(partnerInput);
    graphData.partnerValues = CYCLES.map(c=>{
      const arr = [];
      for(let i=-15;i<=15;i++){
        const d = new Date(today);
        d.setDate(d.getDate()+i);
        arr.push(bioValue(pBirth,d,c.length));
      }
      return arr;
    });
  }

  selectedDay = 0;
  localStorage.setItem('bio-birth', birthInput);
  if(partnerInput) localStorage.setItem('bio-partner', partnerInput);

  if(typeof gtag!=='undefined') gtag('event','calculate_biorhythm');

  document.getElementById('graphSection').classList.add('visible');
  document.getElementById('readingSection').classList.add('visible');
  document.getElementById('criticalSection').classList.add('visible');
  document.getElementById('shareSection').classList.add('visible');
  showShareButtons();

  resizeCanvas();
  animateGraph();
  renderReading(0);
  renderCritical();
}

/* â”€â”€â”€ Reading Cards â”€â”€â”€ */
function getStatus(val){
  const abs = Math.abs(val);
  if(abs < 5) return 'critical';
  if(val > 40) return 'high';
  if(val > -20) return 'mid';
  return 'low';
}

function renderReading(dayOffset){
  const date = new Date(graphData.today);
  date.setDate(date.getDate()+dayOffset);

  const dateEl = document.getElementById('readingDate');
  dateEl.innerHTML = dayOffset===0
    ? `<strong>${fmtDate(date)}</strong> â€” ${t('today')}`
    : `<strong>${fmtDate(date)}</strong>`;

  const grid = document.getElementById('readingGrid');
  grid.innerHTML = '';

  CYCLES.forEach((cycle,ci)=>{
    const val = graphData.values[ci][dayOffset+15];
    const status = getStatus(val);
    const pct = (val+100)/2;

    const statusKey = 'status' + status.charAt(0).toUpperCase()+status.slice(1);
    const descKey = 'desc' + cycle.name.charAt(0).toUpperCase()+cycle.name.slice(1)
      + status.charAt(0).toUpperCase()+status.slice(1);

    const card = document.createElement('div');
    card.className = `reading-card ${cycle.name}`;
    card.innerHTML = `
      <span class="card-icon">${cycle.icon}</span>
      <div class="card-label">${t(cycle.name)}</div>
      <div class="card-value ${val>=0?'positive':'negative'}">${val>=0?'+':''}${Math.round(val)}%</div>
      <div class="card-bar">
        <div class="card-bar-center"></div>
        <div class="card-bar-fill" style="width:${pct}%;background:${cycle.color};box-shadow:0 0 8px ${cycle.glow}"></div>
      </div>
      <div class="card-desc">${t(descKey)}</div>
      <span class="card-status ${status}">${t(statusKey)}</span>
    `;
    grid.appendChild(card);
  });
}

/* â”€â”€â”€ Critical Days â”€â”€â”€ */
function renderCritical(){
  const list = document.getElementById('criticalList');
  list.innerHTML = '';
  const criticals = [];

  CYCLES.forEach((cycle,ci)=>{
    const vals = graphData.values[ci];
    for(let i=1;i<vals.length;i++){
      if((vals[i-1]>0&&vals[i]<=0)||(vals[i-1]<0&&vals[i]>=0)){
        const date = new Date(graphData.today);
        date.setDate(date.getDate()+i-15);
        criticals.push({date, cycle, dayOffset:i-15});
      }
    }
  });

  criticals.sort((a,b)=>a.date-b.date);

  if(criticals.length===0){
    list.innerHTML = '<div style="color:var(--text2);font-size:13px;padding:8px">âœ¨ ì´ ê¸°ê°„ì—ëŠ” ì „í™˜ê¸°ê°€ ì—†ìŠµë‹ˆë‹¤.</div>';
    return;
  }

  criticals.forEach(c=>{
    const item = document.createElement('div');
    item.className = 'critical-item';
    item.style.cursor = 'pointer';
    item.innerHTML = `
      <div class="critical-dot" style="background:${c.cycle.color};box-shadow:0 0 6px ${c.cycle.glow}"></div>
      <div class="critical-date">${fmtDate(c.date)}</div>
      <div class="critical-type">${t('critical'+c.cycle.name.charAt(0).toUpperCase()+c.cycle.name.slice(1))}</div>
    `;
    item.addEventListener('click',()=>{
      selectedDay = c.dayOffset;
      drawGraph(1);
      renderReading(c.dayOffset);
    });
    list.appendChild(item);
  });
}

/* â”€â”€â”€ Canvas Interaction â”€â”€â”€ */
canvas.addEventListener('click', function(e){
  if(!graphData) return;
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const w = rect.width;
  const pad = {left:36,right:16};
  const gw = w-pad.left-pad.right;
  const ratio = (x-pad.left)/gw;
  const dayIndex = Math.round(ratio*30);
  if(dayIndex<0||dayIndex>30) return;
  selectedDay = dayIndex - 15;
  drawGraph(1);
  renderReading(selectedDay);
});

canvas.addEventListener('mousemove', function(e){
  if(!graphData) return;
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left;
  const y = e.clientY - rect.top;
  const w = rect.width;
  const pad = {left:36,right:16};
  const gw = w-pad.left-pad.right;
  const ratio = (x-pad.left)/gw;
  const dayIndex = Math.round(ratio*30);

  const tooltip = document.getElementById('tooltip');
  if(dayIndex<0||dayIndex>30){tooltip.classList.remove('show');return;}

  const date = new Date(graphData.today);
  date.setDate(date.getDate()+dayIndex-15);

  let html = `<div class="tooltip-date">${fmtDate(date)}</div>`;
  CYCLES.forEach((cycle,ci)=>{
    const v = graphData.values[ci][dayIndex];
    html += `<div class="tooltip-row"><div class="tooltip-color" style="background:${cycle.color}"></div>${t(cycle.name)}: <strong>${v>=0?'+':''}${Math.round(v)}%</strong></div>`;
  });

  tooltip.innerHTML = html;
  tooltip.style.left = x + 'px';
  tooltip.style.top = y + 'px';
  tooltip.classList.add('show');
});

canvas.addEventListener('mouseleave', ()=>{
  document.getElementById('tooltip').classList.remove('show');
});

/* â”€â”€â”€ Share â”€â”€â”€ */
function showShareButtons() {
  const shareSection = document.getElementById('share-section');
  if (shareSection) shareSection.style.display = 'flex';
}

document.getElementById('btnShare').addEventListener('click',()=>{
  if(!graphData) return;
  const vals = CYCLES.map((c,i)=>t(c.name)+': '+(graphData.values[i][15]>=0?'+':'')+Math.round(graphData.values[i][15])+'%');
  const text = `ğŸŒ€ ${t('title')}\nğŸ“… ${fmtDate(graphData.today)}\n\n${vals.join('\n')}\n\nhttps://dopabrain.com/biorhythm/`;
  if(navigator.share) navigator.share({title:t('title'),text}).catch(()=>{});
  else{navigator.clipboard.writeText(text).catch(()=>{});alert('Copied!');}
});

document.getElementById('shareTwitterBtn')?.addEventListener('click', () => {
  const text = document.title + ' - ' + window.location.href;
  window.open('https://twitter.com/intent/tweet?text=' + encodeURIComponent(text), '_blank');
  if (typeof gtag !== 'undefined') gtag('event', 'share', { method: 'twitter' });
});

document.getElementById('shareUrlBtn')?.addEventListener('click', () => {
  navigator.clipboard.writeText(window.location.href).then(() => {
    const btn = document.getElementById('shareUrlBtn');
    btn.textContent = 'âœ… Copied!';
    setTimeout(() => { btn.innerHTML = 'ğŸ“‹ Copy URL'; }, 2000);
  });
  if (typeof gtag !== 'undefined') gtag('event', 'share', { method: 'url_copy' });
});

/* â”€â”€â”€ Events â”€â”€â”€ */
document.getElementById('btnCalc').addEventListener('click', calculate);

document.getElementById('birthDate').addEventListener('change', function(){
  if(this.value) calculate();
});

document.getElementById('compatToggle').addEventListener('click', function(){
  this.classList.toggle('on');
  document.getElementById('compatSection').classList.toggle('show', this.classList.contains('on'));
});

document.getElementById('langToggle').addEventListener('click',()=>{
  document.getElementById('langMenu').classList.toggle('open');
});

document.addEventListener('click',(e)=>{
  if(!e.target.closest('.lang-toggle')&&!e.target.closest('.lang-menu')){
    document.getElementById('langMenu').classList.remove('open');
  }
});

document.querySelectorAll('.lang-option').forEach(btn=>{
  btn.addEventListener('click',()=>{
    currentLang = btn.dataset.lang;
    localStorage.setItem('bio-lang', currentLang);
    updateUI();
    document.getElementById('langMenu').classList.remove('open');
    if(graphData){
      drawGraph(1);
      renderReading(selectedDay);
      renderCritical();
    }
  });
});

window.addEventListener('resize', resizeCanvas);

/* â”€â”€â”€ Theme â”€â”€â”€ */
const themeToggle = document.getElementById('theme-toggle');
if(themeToggle){
  const savedTheme = localStorage.getItem('theme') || 'dark';
  document.documentElement.setAttribute('data-theme', savedTheme);
  themeToggle.textContent = savedTheme === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
  themeToggle.addEventListener('click',()=>{
    const current = document.documentElement.getAttribute('data-theme');
    const next = current === 'light' ? 'dark' : 'light';
    document.documentElement.setAttribute('data-theme', next);
    localStorage.setItem('theme', next);
    themeToggle.textContent = next === 'light' ? 'ğŸŒ™' : 'â˜€ï¸';
  });
}

/* â”€â”€â”€ Init â”€â”€â”€ */
function init(){
  createStars();
  updateUI();

  const maxDate = new Date().toISOString().split('T')[0];
  document.getElementById('birthDate').max = maxDate;
  document.getElementById('partnerDate').max = maxDate;

  const saved = localStorage.getItem('bio-birth');
  if(saved){
    document.getElementById('birthDate').value = saved;
    const savedPartner = localStorage.getItem('bio-partner');
    if(savedPartner) document.getElementById('partnerDate').value = savedPartner;
    calculate();
  } else {
    // First visit: show sample result immediately with a demo date
    document.getElementById('birthDate').value = '1995-06-15';
    calculate();
  }

  const loader = document.getElementById('app-loader');
  if(loader){
    loader.classList.add('hidden');
    setTimeout(()=>loader.remove(), 400);
  }
}

function safeInit(){
  try { init(); } catch(e) {
    console.error('Init error:', e);
    const loader = document.getElementById('app-loader');
    if(loader){ loader.classList.add('hidden'); setTimeout(()=>loader.remove(),300); }
  }
}
if(document.readyState==='loading') document.addEventListener('DOMContentLoaded',safeInit);
else safeInit();

})();
</script>
</body>
</html>